<div class="page-title">
  <h1>Accounts Management</h1>
</div>
<div class="info-container">
  <div class="sub-info">
    <p class="text">Manage your info, privacy and security to make the experience better for you.</p>
  </div>

  <section class="section-container">
    <h3>Profile Picture</h3>
    <div class="avatar-container">
      <div class="image-container" *ngIf="image; else placeholder">
      <img class="logo" mat-card-image src="{{image}}">
      </div>

      <ng-template #placeholder>
        <div class="image-container avatar-placeholder">
        </div>
      </ng-template>

      <label class="label-container" for="avatar-input-file">
        <p>Update your profile picture</p>
        <div class="icon-wrapper">
          <input type="file" id="avatar-input-file" accept="image/*" (change)="onFileChange($event)" />
            Upload Image
            <mat-icon class="icon" fontIcon="edit"></mat-icon>
        </div>
      </label>
    </div>

  </section>
<form [formGroup]="infoForm" enctype="multipart/form-data" (ngSubmit)="submit1()">
  <section class="section-container">
    <h3>Profile Information</h3>
    <div class="form-container">
      <div fxLayout="row wrap" fxLayoutGap="16px grid">
        <div fxFlex="50%"
              fxFlex.xs="100%"
              fxFlex.sm="75%">
          <mat-form-field class="mat-field">
            <mat-label>First Name</mat-label>
            <input  matInput
                    formControlName="first_name">
            <mat-error *ngIf="infoForm.get('first_name')?.hasError('required')">
              First Name is <strong>required</strong>
            </mat-error>
          </mat-form-field>
          <div class="space" *ngIf="infoForm.get('first_name')?.hasError('required')"></div>
        </div>
        <div fxFlex="50%"
              fxFlex.xs="100%"
              fxFlex.sm="75%">
          <mat-form-field class="mat-field">
            <mat-label>Last Name</mat-label>
            <input  matInput
                    formControlName="last_name">
            <mat-error *ngIf="infoForm.get('last_name')?.hasError('required')">
              Last Name is <strong>required</strong>
            </mat-error>
          </mat-form-field>
        </div>
        <div fxFlex="50%"
              fxFlex.xs="100%"
              fxFlex.sm="75%">
          <mat-form-field class="mat-field">
            <mat-label>Faculty ID</mat-label>
            <input  matInput
                    formControlName="faculty_id">
            <mat-error *ngIf="infoForm.get('first_name')?.hasError('required')">
              Faculty ID is <strong>required</strong>
            </mat-error>
          </mat-form-field>
        </div>
        <div fxFlex="50%"
              fxFlex.xs="100%"
              fxFlex.sm="75%">
          <mat-form-field class="mat-field">
            <mat-label>Email</mat-label>
            <input  matInput
                    type="email"
                    formControlName="email">
            <mat-error *ngIf="infoForm.get('email')?.hasError('email') && !infoForm.get('email')?.hasError('required')">
              Please enter a valid email address
            </mat-error>
            <mat-error *ngIf="infoForm.get('email')?.hasError('required')">
              Email is <strong>required</strong>
            </mat-error>
          </mat-form-field>
        </div>

        <div fxFlex="50%"
              fxFlex.xs="100%"
              fxFlex.sm="75%">
          <mat-form-field class="mat-field">
            <mat-label>Position</mat-label>
            <mat-select  formControlName="account_type">
              <mat-option>-- Select --</mat-option>
              <mat-option *ngFor="let position of positions" [value]="position.value">
                {{position.viewValue}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>
    </div>
  </section>

  <section class="section-container">
    <h3>Account Information</h3>
    <div fxLayout="row wrap" fxLayoutGap="16px grid">
      <div fxFlex="50%"
              fxFlex.xs="100%"
              fxFlex.sm="75%">
        <mat-form-field class="mat-field">
          <mat-label>Username</mat-label>
          <input  matInput
                  formControlName="username">
          <mat-error *ngIf="infoForm.get('username')?.hasError('userv') && !infoForm.get('username')?.hasError('required')">
            Username must be atleast 3 characters
          </mat-error>
          <mat-error *ngIf="infoForm.get('username')?.hasError('required')">
            Username is <strong>required</strong>
          </mat-error>
        </mat-form-field>
      </div>
      <div fxFlex="50%"
              fxFlex.xs="100%"
              fxFlex.sm="75%">
        <mat-form-field class="mat-field">
          <mat-label>Password</mat-label>
          <input  matInput
                  [type]="hide ? 'password' : 'text'"
                  formControlName="password">
                  <mat-icon matSuffix class="eye-icon" (click)="togglePasswordVisibility()">
                    {{hide ? 'visibility_off' : 'visibility'}}
                  </mat-icon>
          <mat-error *ngIf="infoForm.get('password')?.hasError('passv') && !infoForm.get('password')?.hasError('required') && !infoForm.get('password')?.hasError('pattern')">
            Password must be atleast 5 characters
          </mat-error>
          <mat-error *ngIf="infoForm.get('password')?.hasError('required')">
            Password is <strong>required</strong>
          </mat-error>
        </mat-form-field>
      </div>
    </div>
  </section>
  <div class="d-flex justify-content-end w-100 p-0 mt-4">
    <button mat-raised-button
            type="submit"
            class="btn"
            [title]="infoForm.valid ? 'Save your Entered Data' : 'Disabled until your data is Valid'"
            [disabled]="!infoForm.valid">
      Submit
    </button>
  </div>
</form>
</div>

<footer>
<p>Â© Extensions Office Management Sytstem, 2023</p>
</footer>
